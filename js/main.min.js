"use strict";window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),function(){var e,n,t,i,a,c=[{id:524901,name:"Москва"},{id:498817,name:"Санкт-Петербург"},{id:501175,name:"Ростов-на-Дону"},{id:576116,name:"Благовещенск"},{id:580497,name:"Астрахань"},{id:578072,name:"Белгород"},{id:2026070,name:"Брянск"},{id:473247,name:"Владимир"},{id:472757,name:"Волгоград"},{id:472459,name:"Вологда"},{id:472045,name:"Воронеж"},{id:555312,name:"Иваново"},{id:2023469,name:"Иркутск"},{id:554234,name:"Калининград"},{id:553915,name:"Калуга"},{id:1503901,name:"Кемерово"},{id:548408,name:"Киров"},{id:543878,name:"Кострома"},{id:1501321,name:"Курган"},{id:538560,name:"Курск"},{id:535121,name:"Липецк"},{id:2123628,name:"Магадан"},{id:2124187,name:"Красногорск"},{id:524305,name:"Мурманск"},{id:520555,name:"Нижний Новгород"},{id:519336,name:"Великий Новгород"},{id:1496747,name:"Новосибирск"},{id:1496153,name:"Омск"},{id:515003,name:"Оренбург"},{id:515012,name:"Орел"},{id:519560,name:"Пенза"},{id:504341,name:"Псков"},{id:500095,name:"Рязань"},{id:499099,name:"Самара"},{id:498677,name:"Саратов"},{id:2119441,name:"Южно-Сахалинск"},{id:1486209,name:"Екатеринбург"},{id:491687,name:"Смоленск"},{id:484646,name:"Тамбов"},{id:480060,name:"Тверь"},{id:1489425,name:"Томск"},{id:3165115,name:"Тула"},{id:1488754,name:"Тюмень"},{id:479123,name:"Ульяновск"},{id:1508291,name:"Челябинск"},{id:468902,name:"Ярославль"},{id:2026643,name:"Биробиджан"},{id:1503772,name:"Ханты-Мансийск"},{id:2127202,name:"Анадырь"},{id:1493197,name:"Салехард"},{id:1510853,name:"Барнаул"},{id:2025339,name:"Чита"},{id:2122104,name:"Петропавловск-Камчатский"},{id:542420,name:"Краснодар"},{id:1502026,name:"Красноярск"},{id:511196,name:"Пермь"},{id:2013348,name:"Владивосток"},{id:487846,name:"Ставрополь"},{id:2022890,name:"Хабаровск"},{id:528293,name:"Майкоп"},{id:1506271,name:"Горно-Алтайск"},{id:479561,name:"Уфа"},{id:2014407,name:"Улан-Удэ"},{id:532096,name:"Махачкала"},{id:6313621,name:"Магас"},{id:563514,name:"Элиста"},{id:569154,name:"Черкесск"},{id:509820,name:"Петрозаводск"},{id:485239,name:"Сыктывкар"},{id:466806,name:"Йошкар-Ола"},{id:498698,name:"Саранск"},{id:2013159,name:"Якутск"},{id:473249,name:"Владикавказ"},{id:551487,name:"Казань"},{id:1500973,name:"Кызыл"},{id:554840,name:"Ижевск"},{id:1512236,name:"Абакан"},{id:558418,name:"Грозный"},{id:569696,name:"Чебоксары"},{id:694423,name:"Севастополь"},{id:693805,name:"Симферополь"},{id:706524,name:"Керч"}],s={APIKey:"959d949ddcff86a99efc29f96ae96b38",lang:"ru",pressureMMHg:.75006375541921,kelvin:273.15,initialCity:c[0].id};function o(e){return 200<=e.status&&e.status<300?Promise.resolve(e):Promise.reject(new Error(e.statusText))}function r(e){return e.json()}function d(a){var d;return c.forEach(function(e){var n,t,i;e.name==a&&(d=e.id,n=e.id,t=s.APIKey,i=s.lang,fetch("https://api.openweathermap.org/data/2.5/weather?id=".concat(n,"&appid=").concat(t,"&lang=").concat(i)).then(o).then(r).then(function(e){m(e)}).catch(function(e){console.log(e.name),console.log("Ошибка: "+e.message),console.log(e.response)}))}),d}function m(o){document.querySelector(".widgets-wrap").innerHTML="",c.forEach(function(e){if(e.name==o.name){var n='<div class="widget">\n                      <div class="widget__city">'.concat(e.name,"</div>"),t="".concat(function(){var e=new Date,n=l(e.getHours()),t=l(e.getMinutes()),i=l(e.getDate()),a=e.getMonth();0==a&&(a="января");1==a&&(a="февраля");2==a&&(a="марта");3==a&&(a="апреля");4==a&&(a="мая");5==a&&(a="июня");6==a&&(a="июля");7==a&&(a="августа");8==a&&(a="сентября");9==a&&(a="октября");10==a&&(a="ноября");11==a&&(a="декабря");var d=l(e.getFullYear());return'<div class="widget__date-time">\n                  <div class="widget__date">'.concat(i," ").concat(a," ").concat(d,'</div>\n                  <div class="widget__time">').concat(n,":").concat(t," (мск)</div>\n                </div>")}()),i='<div class="widget__icon"><img class="weather-icon" src="https://openweathermap.org/img/wn/'.concat(o.weather[0].icon,'@2x.png"></div>\n                      <div class="widget__temp">').concat(Math.round(o.main.temp-s.kelvin),'°C</div>\n                      <div class="widget-data">\n                        <div class="data-block">\n                          <div class="data__title">Давление (мм рт.ст.): </div>\n                          <div class="data__num pressure">').concat(Math.round(o.main.pressure*s.pressureMMHg),'</div>\n                        </div>\n                        <div class="data-block">\n                          <div class="data__title">Влажность: </div>\n                          <div class="data__num humidity">').concat(o.main.humidity,'%</div>\n                        </div>\n                        <div class="data-block">\n                          <div class="data__title">Облачность: </div>\n                          <div class="data__num cloud">').concat(o.clouds.all,'%</div>\n                        </div>\n                        <div class="data-block">\n                          <div class="data__title">Осадки: </div>\n                          <div class="data__num precipitation">').concat(o.weather[0].description,'</div>\n                        </div>\n                        <div class="data-block">\n                          <div class="data__title">Направление ветра: </div>\n                          <div class="data__num wind-direction">').concat((a=o.wind.deg,d="северный",22<=a&&a<45&&(d="северо-северо-восточный"),45<=a&&a<67&&(d="северо-восточный"),67<=a&&a<90&&(d="востоко-северо-восточный"),90<=a&&a<112&&(d="восточный"),112<=a&&a<135&&(d="востоко-юго-восточный"),135<=a&&a<157&&(d="юго-восточный"),157<=a&&a<180&&(d="юго-юго-восточный"),180<=a&&a<202&&(d="южный"),202<=a&&a<225&&(d="юго-юго-западный"),225<=a&&a<247&&(d="юго-западный"),247<=a&&a<270&&(d="западо-юго-западный"),270<=a&&a<292&&(d="западный"),292<=a&&a<315&&(d="западо-северо-западный"),315<=a&&a<337&&(d="северо-западный"),337<=a&&a<359&&(d="северо-северо-западный"),d),'</div>\n                        </div>\n                        <div class="data-block">\n                          <div class="data__title">Сила ветра: </div>\n                          <div class="data__num wind-speed">').concat(Math.round(o.wind.speed)," м/с</div>\n                        </div>\n                      </div>\n                    </div>");document.querySelector(".widgets-wrap").innerHTML+=n+t+i}var a,d})}function l(e){return e<=9&&(e="0".concat(e)),e}e=s.initialCity,n=s.APIKey,t=s.lang,fetch("https://api.openweathermap.org/data/2.5/weather?id=".concat(e,"&appid=").concat(n,"&lang=").concat(t)).then(o).then(r).then(function(e){m(e)}).catch(function(e){console.log(e.name),console.log("Ошибка: "+e.message),console.log(e.response)}),i=document.getElementById("autocomplete"),a=document.querySelector(".cities-list"),i.addEventListener("input",function(){a.innerHTML="",a.classList.remove("cities-list--active");var e,n,t=i.value.trim();""!=t&&(i.value=i.value[0].toUpperCase()+i.value.slice(1),(e=c,n=[],e.forEach(function(e){n.push(e.name),n.sort()}),n).forEach(function(e){if(t.toUpperCase()==e.substr(0,t.length).toUpperCase()){var n=document.createElement("li");n.classList.add("cities__item"),n.textContent=e,a.classList.add("cities-list--active"),a.appendChild(n)}}),document.querySelectorAll(".cities__item").forEach(function(e){e.addEventListener("click",function(){i.value=e.textContent,d(i.value),a.innerHTML="",a.classList.remove("cities-list--active")}),e.addEventListener("touch",function(){i.value=e.textContent,d(i.value),a.innerHTML="",a.classList.remove("cities-list--active")})}))})}(),function(){if("undefined"!=typeof window&&window.addEventListener){var n,u=Object.create(null),v=function(){clearTimeout(n),n=setTimeout(t,100)},h=function(){},f=function(e){function n(e){if(void 0!==e.protocol)var n=e;else(n=document.createElement("a")).href=e;return n.protocol.replace(/:/g,"")+n.host}if(window.XMLHttpRequest){var t=new XMLHttpRequest,i=n(location);e=n(e),t=void 0===t.withCredentials&&""!==e&&e!==i?XDomainRequest||void 0:XMLHttpRequest}return t},t=function(){function i(){0===--o&&(h(),function(){if(window.addEventListener("resize",v,!1),window.addEventListener("orientationchange",v,!1),window.MutationObserver){var e=new MutationObserver(v);e.observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0}),h=function(){try{e.disconnect(),window.removeEventListener("resize",v,!1),window.removeEventListener("orientationchange",v,!1)}catch(e){}}}else document.documentElement.addEventListener("DOMSubtreeModified",v,!1),h=function(){document.documentElement.removeEventListener("DOMSubtreeModified",v,!1),window.removeEventListener("resize",v,!1),window.removeEventListener("orientationchange",v,!1)}}())}function e(e){return function(){!0!==u[e.base]&&(e.useEl.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","#"+e.hash),e.useEl.hasAttribute("href")&&e.useEl.setAttribute("href","#"+e.hash))}}function n(t){return function(){var e=document.body,n=document.createElement("x");t.onload=null,n.innerHTML=t.responseText,(n=n.getElementsByTagName("svg")[0])&&(n.setAttribute("aria-hidden","true"),n.style.position="absolute",n.style.width=0,n.style.height=0,n.style.overflow="hidden",e.insertBefore(n,e.firstChild)),i()}}function t(e){return function(){e.onerror=null,e.ontimeout=null,i()}}var a,d,o=0;h();var c=document.getElementsByTagName("use");for(d=0;d<c.length;d+=1){try{var s=c[d].getBoundingClientRect()}catch(e){s=!1}var r=(a=c[d].getAttribute("href")||c[d].getAttributeNS("http://www.w3.org/1999/xlink","href")||c[d].getAttribute("xlink:href"))&&a.split?a.split("#"):["",""],m=r[0];r=r[1];var l=s&&0===s.left&&0===s.right&&0===s.top&&0===s.bottom;s&&0===s.width&&0===s.height&&!l?(c[d].hasAttribute("href")&&c[d].setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a),m.length&&(!0!==(a=u[m])&&setTimeout(e({useEl:c[d],base:m,hash:r}),0),void 0===a&&(void 0!==(r=f(m))&&(a=new r,(u[m]=a).onload=n(a),a.onerror=t(a),a.ontimeout=t(a),a.open("GET",m),a.send(),o+=1)))):l?m.length&&u[m]&&setTimeout(e({useEl:c[d],base:m,hash:r}),0):void 0===u[m]?u[m]=!0:u[m].onload&&(u[m].abort(),delete u[m].onload,u[m]=!0)}c="",o+=1,i()},e=function e(){window.removeEventListener("load",e,!1),n=setTimeout(t,0)};"complete"!==document.readyState?window.addEventListener("load",e,!1):e()}}();